@page "/register"
@using Microsoft.AspNetCore.Components.Forms
@using MMIP.Shared.Entities
@using Microsoft.AspNetCore.Authentication

<PageTitle>Registreren</PageTitle>

<h1>Registreren</h1>
<br/>
<MudGrid>
    <MudItem md="4" xs="12">
        <MudItem>
            <h2>Profielbeschrijving</h2>
            <MudTextField T="string" Label="Profielbeschrijving" Variant="Variant.Outlined" Lines="10"></MudTextField>
        </MudItem>
    </MudItem>
    <MudItem md="8" xs="12">
        <MudGrid>
            <MudItem md="4" xs="12">
                <h2>Voornaam</h2>
                <MudTextField @bind-Value=@_userForRegistration.FirstName For="@(() => _userForRegistration.FirstName)" Variant="Variant.Outlined" Label="Voornaam" InputType="@_textInput"></MudTextField>
            </MudItem>
            <MudItem md="4" xs="12">
                <h2>Tussenvoegsel</h2>
                <MudTextField @bind-Value=@_userForRegistration.Prefixes For="@(() => _userForRegistration.Prefixes)" Variant="Variant.Outlined" Label="Tussenvoegsel" InputType="@_textInput"></MudTextField>
            </MudItem>
            <MudItem md="4" xs="12">
                <h2>Achternaam</h2>
                <MudTextField @bind-Value=@_userForRegistration.LastName For="@(() => _userForRegistration.LastName)" Variant="Variant.Outlined" Label="Achternaam" InputType="@_textInput"></MudTextField>
            </MudItem>
            <MudItem md="4" xs="12">
                <h2>E-mailadres</h2>
                <MudTextField @bind-Value=@_userForRegistration.Email For="@(() => _userForRegistration.Email)" Variant="Variant.Outlined" Label="E-mailadres" InputType="@_emailInput"></MudTextField>
            </MudItem>
            <MudItem md="4" xs="12">
                <h2>Wachtwoord</h2>
                <MudTextField @bind-Value=@_userForRegistration.Password For="@(() => _userForRegistration.Password)" Variant="Variant.Outlined" Label="Wachtwoord" InputType="@_passwordInput"></MudTextField>
            </MudItem>
            <MudItem md="4" xs="12">
                <h2>Wachtwoord herhalen</h2>
                <MudTextField @bind-Value=@_userForRegistration.RepeatPassword For="@(() => _userForRegistration.RepeatPassword)" Variant="Variant.Outlined" Label="Wachtwoord herhalen" InputType="@_passwordInput"></MudTextField>
            </MudItem>
        </MudGrid>
    </MudItem>
</MudGrid>
@* TODO: Add functionaliteit for uploading pictures *@
<MudGrid>
    <MudItem md="4" xs="12">
        <h2 Class="alignment-center">Profielfoto uploaden</h2>
        <MudFileUpload T="IBrowserFile" FilesChanged="UploadFiles" Class="alignment-center">
            <ButtonTemplate>
                <MudFab Id="upload_profile_picture_button_styling"
                        HtmlTag="label"
                        Icon="@Icons.Material.Filled.Image"
                        Label="Profielfoto"/>
            </ButtonTemplate>
        </MudFileUpload>
    </MudItem>
</MudGrid>
@* TODO: Add privacy page and redirect to it *@
<MudGrid>
    <MudItem md="6"></MudItem> @* For the alignment of the rest of the items in this grid*@
    <MudItem md="4" xs="12">
        <MudCheckBox @bind-Checked="@IsChecked">
            Ik ga akkoord met de <a href="/">privacyverklaring</a> van MatchMaker.
        </MudCheckBox>
    </MudItem>
    <MudItem md="2" xs="12">
        <MudButton>
            Registreren
        </MudButton>
    </MudItem>

</MudGrid>

@code {
    private readonly InputType _textInput = InputType.Text;
    private readonly InputType _emailInput = InputType.Email;
    private readonly InputType _passwordInput = InputType.Password;

    private User _userForRegistration = new User();

    [Inject]
    public IAuthenticationService AuthenticationService { get; set; }
    [Inject]
    public NavigationManager NavigationManager { get; set; }

    // User newUser = new();

    public bool IsChecked { get; set; }

    //TODO: Add functionality (make it work and uploading the files to the server)
    IList<IBrowserFile> profilePictures = new List<IBrowserFile>();
    private void UploadFiles(IBrowserFile profilePicture)
    {
        profilePictures.Add(profilePicture);
    }
}